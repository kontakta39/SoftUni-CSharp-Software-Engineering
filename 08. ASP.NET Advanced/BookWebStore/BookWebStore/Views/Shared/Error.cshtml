@using BookWebStore.ViewModels
@model ErrorViewModel

@{
    ViewData["Title"] = "Error";
    bool isAdminUser = User.IsInRole("Administrator");
}

<div class="d-flex justify-content-center align-items-center mb-3 mt-3" style="font-size: 2.5rem; font-weight: 700; color: #dc3545;">
    <h1>@ViewData["Title"]</h1>
</div>
<hr class="mb-5" style="border-top: 2px solid #dc3545;" />

<div class="d-flex flex-column justify-content-center align-items-center mb-4">
    <div class="col-md-7 text-center" style="border: 2px solid #dc3545; border-radius: 12px; padding: 30px; background-color: #fff5f5; box-shadow: 0 3px 8px rgba(220, 53, 69, 0.3);">
        <h2 class="text-danger mb-4" style="font-weight: 700;">Unfortunately, something went wrong.</h2>

        @if (!string.IsNullOrEmpty(Model.ErrorMessage))
        {
            <div class="alert alert-danger mb-4" style="font-size: 1.1rem;">@Model.ErrorMessage</div>
        }
        else
        {
            <div class="alert alert-danger mb-4" style="font-size: 1.1rem;">
                An error occurred while processing your request. Please try again later.
            </div>
        }

        @*Show RequestId only if the user is in role of an administrator*@
        @if (Model.ShowRequestId && isAdminUser)
        {
            <div class="d-flex justify-content-center align-items-center gap-3 mb-4">
                <div>
                    <h5 style="font-weight: 600;">Request ID:</h5>
                </div>
                <div class="alert alert-secondary mb-0 py-2" role="alert" style="font-family: monospace; font-size: 0.9rem; margin-bottom: 0;">
                    <p class="mt-2 mb-2">@Model.RequestId</p>
                </div>
            </div>
        }

        <a asp-controller="Home" asp-action="Index" class="btn btn-primary"
           style="font-weight: 600; padding: 0.6rem 1.5rem; border-radius: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
            Back to homepage
        </a>
    </div>
</div>